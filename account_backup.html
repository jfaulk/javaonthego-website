<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Java On The Go</title>

    <!-- Material Design Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design Bootstrap -->
    <link href="css/mdb.min.css" rel="stylesheet">

    <!-- Template style -->
    <link href="css/style.css" rel="stylesheet">

    <link rel="shortcut icon" href="favicon.ico">

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/js.cookie-2.1.0.min.js"></script>
    <script type="text/javascript" src="js/javaonthego.js"></script>
    <script>
        $(document).ready(function() {
            $.ajax({
                url: "http://javaonthego.ca:8080/api/user/" + getCurrentUser()
            }).then(function(data, status, jqxhr) {
                $('#userName').text(data.userName);
                $('#email').text(data.email);
                $('#dateCreated').text(data.dateCreated);
                $('#lastChallenge').text(data.lastChallenge);
                $('#level').attr("src", "img/ranks/rank" + data.level + ".png");
            });
        });
    </script>
</head>

<body>
<!-- Navigation -->
<nav class="navbar z-depth-2 info-color">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><img src="img/WideLogo3.png" alt=""></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="index.html" class="waves-effect waves-light">Home</a></li>
                <li><a href="game.html" class="waves-effect waves-light">Game</a></li>
                <script>if (isLoggedIn()) document.write('<li><a href="achievements.html" class="waves-effect waves-light">Achievements</a></li>');</script>
                <li><a href="resources.html" class="waves-effect waves-light">Resources</a></li>
                <script>if (!isLoggedIn()) document.write('<li><a href="signup.html" class="waves-effect waves-light">Sign Up!</a></li>');</script>
                <script>if (!isLoggedIn()) document.write('<li><a href="login.html" class="waves-effect waves-light">Login</a></li>');</script>
                <script>if (isLoggedIn()) document.write('<li><a href="account.html" class="waves-effect waves-light">Your Account</a></li>');</script>
                <script>if (isLoggedIn()) document.write('<li><a href="logout.html" class="waves-effect waves-light">Logout</a></li>');</script>
            </ul>
        </div>
    </div>
</nav>

<!-- Page Content -->

<div class="container">
<h2 class="text-center"> Your Account </h2>
<div class="row">

<div class="col-md-2 "></div>
<div class="col-md-2 col-xs-6">
<img id="level" class="img-responsive .img-rounded" alt="account level">
</div>


<div class="col-md-4 col-xs-6">
<div class="panel panel-default text-center">
		Username:<strong><p id="userName"></p></strong>
                Email: <p id="email"></p>
                Date Created: <p id="dateCreated"></p>
                Last Challenge: <p id="lastChallenge"></p>
</div>
</div>

</div><!-- /row-->

<div class="row">
<div class="col-md-2 "></div>
<div class="col-md-1"></div>
<div class="col-md-4 ">					
		<input id="updatePassword" name="password" type="password" class="validate">
		<label for="updatePassword">Password</label> 

		<input id="updateEmail" name="email" type="email" class="validate">
		<label for="updateEmail">Email</label>			
</div>

</div><!-- /row-->

<div class="row ">
<div class="col-md-2"></div>
<div class="col-md-2"></div>
<div class="col-md-3">
		<button type="submit" name="submit" class="btn btn-primary waves-effect waves-light">Update!</button>
</div>
</div>

</div> <!-- /container-->

<!-- Footer -->
<footer class="page-footer info-color darken-1" if="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-md-offset-1">
                <p class="white-text center-on-small-only">GET STARTED</p>
                <p class="white-text center-on-small-only">Register for free and start to learn.</p>
                <a href="signup.html" class="btn btn-danger waves-effect waves-light">Get started!</a>

            </div>
            <hr class="hidden-lg hidden-md">

            <div class="col-md-2">
                <p class="white-text center-on-small-only">USEFUL LINKS</p>
                <ul>
                    <li><a class="grey-text text-lighten-3" href="http://www.oracle.com/technetwork/java/javase/documentation/index.html" target="_blank">Oracle Documentation</a>
                    </li>
                    <li><a class="grey-text text-lighten-3" href="https://eclipse.org/downloads/" target="_blank">Eclipse IDE</a>
                    </li>
                    <li><a class="grey-text text-lighten-3" href="http://stackoverflow.com/" target="_blank">Stack Overflow</a>
                    </li>
                    <li><a class="grey-text text-lighten-3" href="http://www.tutorialspoint.com/java/java_quick_guide.htm" target="_blank">Java Quick Reference</a>
                    </li>
                </ul>
            </div>
            <hr class="hidden-lg hidden-md">

            <div class="col-md-3 text-center">
                <p class="white-text text-center"> SOCIAL MEDIA</p>
                <a target="_blank" href="https://www.facebook.com/learnjavaonthego/" class="btn-floating btn-large fb-bg waves-effect waves-light"><i class="fa fa-facebook"> </i></a>
                <a target="_blank" href="https://plus.google.com/communities/105997598486397490148" class="btn-floating btn-large gplus-bg waves-effect waves-light"><i class="fa fa-google-plus"> </i></a>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div class="col-md-10 col-md-offset-1"> Â© 2016 Copyright Java On The Go</div>
        </div>
    </div>
</footer>

<script>
    $("#update").submit(function(event){
        var formJqObj = $("#update");
        var formDataObj = {};
        (function(){
            formJqObj.find(":input").not("[type='submit']").not("[type='reset']").each(function(){
                var thisInput = $(this);
                formDataObj[thisInput.attr("name")] = thisInput.val();
            });
        })();
        $.ajax({
                    type: "POST",
                    url: "http://javaonthego.ca:8080/api/user/" + getCurrentUser(),
                    data: JSON.stringify(formDataObj),
                    contentType: "application/json"
                })
                .done(function(data, textStatus, jqXHR){
                    console.log("Ajax completed: " + data);
                    location.reload(true);
                })
                .fail(function(jqXHR, textStatus, errorThrown){
                    console.log("Ajax problem: " + textStatus + ". " + errorThrown);
                });
        event.preventDefault();
    });
</script>


<!-- SCRIPTS -->

<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="js/bootstrap.min.js"></script>

<!-- Material Design Bootstrap -->
<script type="text/javascript" src="js/mdb.min.js"></script>


</body>

</html>
